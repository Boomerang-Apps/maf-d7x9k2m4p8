# Implementation Plan: [STORY-ID]

> **Template Version:** 1.0  
> **Required By:** Gate 1 (Planning)  
> **Purpose:** Document implementation plan before coding begins

---

## Agent

| Field | Value |
|-------|-------|
| Agent ID | [agent-code] |
| Agent Type | [fe-*/be-*/qa-*] |
| Session Started | [YYYY-MM-DD HH:MM UTC] |
| Branch | feature/[STORY-ID]-[description] |
| Worktree Path | /worktrees/[STORY-ID] |

---

## Story Reference

| Field | Value |
|-------|-------|
| Story ID | [STORY-ID] |
| Epic | [EPIC-ID] |
| Domain | [AUTH/CLIENT/PILOT/etc.] |
| Priority | [P0/P1/P2/P3] |
| Size | [S/M/L/XL] |

---

## Scope

### What Will Be Implemented

[Describe what will be built - extract from Gate 0 research and story acceptance criteria]

### What Is NOT In Scope

[Explicitly list what this story does NOT include to prevent scope creep]

---

## Approach

### Technical Strategy

[High-level description of how the implementation will be structured]

### Key Decisions

1. **[Decision 1]:** [Rationale]
2. **[Decision 2]:** [Rationale]

### Patterns to Follow

- [ ] Follow existing pattern in: [path/to/reference/file.ts]
- [ ] Use contracts from: [contracts/entities/X.ts]

---

## Files to Create

List all new files that will be created:

- [ ] `path/to/file1.ts` - [purpose]
- [ ] `path/to/file2.tsx` - [purpose]
- [ ] `path/to/file3.test.ts` - [purpose]

---

## Files to Modify

List all existing files that will be modified:

- [ ] `path/to/existing1.ts` - [what changes]
- [ ] `path/to/existing2.ts` - [what changes]

---

## Database Changes

### Migrations Required

- [ ] `supabase/migrations/YYYYMMDD_[name].sql` - [purpose]

### Tables Affected

| Table | Action | Details |
|-------|--------|---------|
| [table_name] | CREATE/ALTER/DROP | [description] |

### RLS Policies

- [ ] Policy for: [description]

---

## Test Plan

### Unit Tests

- [ ] Test for: [component/function 1]
- [ ] Test for: [component/function 2]

### Integration Tests

- [ ] Test for: [flow 1]
- [ ] Test for: [flow 2]

### Edge Cases

- [ ] Test: [edge case 1]
- [ ] Test: [edge case 2]

### Coverage Target

- Minimum: 80%
- Target: 90%

---

## Dependencies

### Stories That Must Complete First

| Story ID | Status | Reason |
|----------|--------|--------|
| [STORY-ID] | [merged/in-progress] | [why this is a dependency] |

### External Dependencies

- [ ] [External service/API/etc.]

---

## Risks

| Risk | Probability | Impact | Mitigation |
|------|-------------|--------|------------|
| [Risk 1] | Low/Med/High | Low/Med/High | [How to mitigate] |
| [Risk 2] | Low/Med/High | Low/Med/High | [How to mitigate] |

---

## Estimated Completion

| Gate | Estimate | Notes |
|------|----------|-------|
| Gate 2 (Build) | [X hours/days] | [assumptions] |
| Gate 3 (Test) | [X hours/days] | [assumptions] |
| Total | [X hours/days] | |

---

## Checklist Before Proceeding

- [ ] Gate 0 research reviewed
- [ ] Scope is clear and bounded
- [ ] All dependencies identified
- [ ] No blocking stories pending
- [ ] Rollback plan created (ROLLBACK-PLAN.md)
- [ ] Feature branch created from latest main
- [ ] Git tag created: story/[STORY-ID]/gate-1

---

## Approval

| Role | Agent | Approved | Timestamp |
|------|-------|----------|-----------|
| Dev Agent | [agent-id] | ☐ | |
| PM Agent | pm-agent | ☐ | |

---

**IMPORTANT:** Do not proceed to Gate 2 (Build) until this plan is complete and approved.
